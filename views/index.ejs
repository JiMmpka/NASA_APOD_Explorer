<%- include('partials/header') %>

    <main>
      <!-- Date Selection Section -->
      <div class="form-section">
        <h2>ğŸ“… Select Date:</h2>
        <form action="/get-date-picture" method="POST">
          <input type="date" 
                 name="date" 
                 id="dateInput" 
                 max="<%= new Date().toISOString().split('T')[0] %>"
                 min="1995-06-16"
                 value="<%= data ? data.date : new Date().toISOString().split('T')[0] %>"
                 required>
          <button type="submit" class="btn-primary"><span>ğŸ”­ Show Picture</span></button>
        </form>
        <a href="/random" class="btn-secondary"><span>ğŸ² Random Picture</span></a>
        <a href="/" class="btn-secondary"><span>ğŸ“† Today's Picture</span></a>
      </div>

      <!-- Content Display Wrapper (for loading animation) -->
      <div class="content-display-wrapper">
        <!-- Loading Overlay -->
        <div id="loader-overlay" class="loader-overlay">
          <div class="loader-content">
            <div class="spinner"></div>
            <p>ğŸš€ Traveling through space to NASA servers...</p>
          </div>
        </div>

        <!-- NASA APOD Data Display Section -->
        <% if (data) { %>
        <div class="space-data-section">
          <div class="apod-header">
            <h2><%= data.title %></h2>
            <p class="apod-date">ğŸ“… Date: <%= data.date %></p>
            <% if (data.copyright) { %>
              <p class="apod-copyright">ğŸ“¸ Â© <%= data.copyright %></p>
            <% } %>
          </div>
          
          <div class="space-image-container">
            <% if (data.media_type === 'image') { %>
              <a href="<%= data.hdurl || data.url %>" target="_blank">
                <img src="<%= data.url %>" 
                     alt="<%= data.title %>" 
                     class="space-image">
              </a>
              <p class="image-hint">ğŸ’¡ Click on the image to view in full resolution</p>
            <% } else if (data.media_type === 'video') { %>
              <div class="video-container">
                <iframe src="<%= data.url %>" 
                        frameborder="0" 
                        allowfullscreen
                        class="space-video"></iframe>
              </div>
            <% } %>
          </div>
          
          <div class="space-fact-container">
            <h3>ğŸ“– Description:</h3>
            <div class="space-fact-scrollable">
              <p class="space-explanation"><%= data.explanation %></p>
            </div>
          </div>
        </div>
        <% } %>

        <!-- Error Section -->
        <% if (error) { %>
        <div class="error-section">
          <h3>âŒ Oops! Something went wrong</h3>
          <p><%= error %></p>
          <a href="/" class="btn-secondary"><span>ğŸ”„ Try Again</span></a>
        </div>
        <% } %>
      </div>
    </main>

<%- include('partials/footer') %>
